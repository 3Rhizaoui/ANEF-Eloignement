1
00:00:00,003 --> 00:00:00,103
3. Appel Brique Réutilisable pour lancer URl ANEF pour Agent

2
00:00:00,107 --> 00:00:00,108
5. RunConfiguration: getProjectDir for LogDriver 

3
00:00:00,110 --> 00:00:00,111
11. RunConfiguration: getExecutionProperties Driver 

4
00:00:00,112 --> 00:00:00,113
15. DriverName = get("WebUI").get("browserType")

5
00:00:00,114 --> 00:00:00,115
19. println("DriverName :" + DriverName)

6
00:00:00,117 --> 00:00:00,119
23. println("Driverpath :" + RunBrowserConfiguration.get("drivers"))

7
00:00:00,120 --> 00:00:00,121
27. if (Profiles == "Usager")

8
00:00:00,122 --> 00:00:00,123
31. if (Profiles == "Agent")

9
00:00:00,124 --> 00:00:00,124
1. if (EnvExec == "URLPortailAgentQualif")

10
00:00:00,126 --> 00:00:05,089
1. openBrowser(URLPortailAgentQualif)

11
00:00:05,092 --> 00:00:05,093
5. if (EnvExec == "URLPortailAgentPreProd")

12
00:00:05,096 --> 00:00:05,111
9. maximizeWindow()

13
00:00:05,113 --> 00:00:05,208
9. Appel Brique Réutilisable pour Identification Agent

14
00:00:05,216 --> 00:00:05,219
1. com.kazurayam.ksbackyard.HighlightElement.pandemic()

15
00:00:05,222 --> 00:00:05,225
5. if (Profiles == "Usager")

16
00:00:05,228 --> 00:00:05,229
11. Identification : Portail Agent

17
00:00:05,230 --> 00:00:05,232
1. if (EnvExec == "URLPortailAgentQualif")

18
00:00:05,234 --> 00:00:07,563
1. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_ANEF_Connexion/Input_UserNameAgent"), IdentifiantAgent)

19
00:00:07,565 --> 00:00:09,849
5. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_ANEF_Connexion/Input_PasswordAgent"), PwAgent)

20
00:00:09,851 --> 00:00:09,851
5. if (EnvExec == "URLPortailAgentPreProd")

21
00:00:09,853 --> 00:00:10,975
9. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_ANEF_Connexion/btn_Valider_Conx_Agent"))

22
00:00:10,977 --> 00:00:15,982
15. delay(5)

23
00:00:15,984 --> 00:00:16,008
19. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Accueil_Principale/btn_ANEF_Eloignement"), 1, STOP_ON_FAILURE)

24
00:00:16,010 --> 00:00:16,093
15. Appel Brique Réutilisable pour Creation ou Recherche de dossier avec un numero etranger 

25
00:00:16,095 --> 00:00:18,792
3. Accèder à la page d'accueil  ANEF eloignement

26
00:00:18,795 --> 00:00:18,869
9. Vérifier la position de la page d'accueil eloignement

27
00:00:18,870 --> 00:00:23,875
13. delay(5)

28
00:00:23,877 --> 00:00:25,003
19. Cliquer sur le bouton Recherche Globale

29
00:00:25,005 --> 00:00:25,006
25. Choisir la methode de Creation d'un nouveau dossier pour un numero etranger inexistant

30
00:00:25,007 --> 00:00:25,013
1. NumberUsagerRandom = tools.MyStringTools.getRandomNumber(100000000, 9999999999)

31
00:00:25,015 --> 00:00:25,016
5. println(NumberUsagerRandom)

32
00:00:25,018 --> 00:00:25,019
9. NumberUsager = NumberUsagerRandom.toString()

33
00:00:25,020 --> 00:00:27,292
13. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/Input_Numero_etranger"), NumberUsager, STOP_ON_FAILURE)

34
00:00:27,297 --> 00:00:28,416
17. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/Input_Numero_etranger"), STOP_ON_FAILURE)

35
00:00:28,419 --> 00:00:28,452
21. scrollToElement(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/btn_Lancer_La_Recherche"), 5, STOP_ON_FAILURE)

36
00:00:28,453 --> 00:00:29,583
25. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/btn_Lancer_La_Recherche"), STOP_ON_FAILURE)

37
00:00:29,585 --> 00:00:39,601
29. delay(10)

38
00:00:39,602 --> 00:00:39,641
33. scrollToElement(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/btn_Aucune_Correspondance"), 5, STOP_ON_FAILURE)

39
00:00:39,643 --> 00:00:40,766
37. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/btn_Aucune_Correspondance"), STOP_ON_FAILURE)

40
00:00:40,767 --> 00:00:42,164
41. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Creation_ou_Recherche_Dossier/btn_Creer_Un_Dossier_Etranger"), STOP_ON_FAILURE)

41
00:00:42,165 --> 00:00:52,172
45. delay(10)

42
00:00:52,175 --> 00:00:52,176
29. if (CreationOuRecherche == "Recherche")

43
00:00:52,177 --> 00:00:52,178
19. if (CreationOuRecherche == "Creation")

44
00:00:52,180 --> 00:00:52,618
3. Appel Brique Réutilisable pour Creation ou Recherche de dossier avec un numero etranger 

45
00:00:52,620 --> 00:00:52,657
5. Vérification des correspondances entres les accordéons dans la page et le menu à gauche

46
00:00:52,659 --> 00:00:52,688
9. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Accordeon/lbl_Numero_Etranger"), 1, STOP_ON_FAILURE)

47
00:00:52,689 --> 00:00:52,711
13. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Accordeon/lbl_Prefecture_Gestionnaire"), 1, STOP_ON_FAILURE)

48
00:00:52,713 --> 00:00:52,744
17. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Accordeon/lbl_Derniere_Modification"), 1, STOP_ON_FAILURE)

49
00:00:52,745 --> 00:00:52,775
23. Accordeon Reference Dossier

50
00:00:52,779 --> 00:00:52,812
27. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Menu/Menu_Reference_Du_Dossier"), 1, STOP_ON_FAILURE)

51
00:00:52,813 --> 00:00:52,844
31. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/input_Numero_De_Dossier_FPR"), 1, STOP_ON_FAILURE)

52
00:00:52,845 --> 00:00:52,877
35. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/input_Numero_Dossier_Interne"), 1, STOP_ON_FAILURE)

53
00:00:52,879 --> 00:00:52,906
41. Accordeon Etat Civil 

54
00:00:52,908 --> 00:00:52,940
45. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Menu/Menu_Fiche_Etat_Civil"), 1, STOP_ON_FAILURE)

55
00:00:52,942 --> 00:00:52,971
51. Accordeon Biometrie 

56
00:00:52,973 --> 00:00:53,005
57. Accordeon Conditions d'entrée en France 

57
00:00:53,009 --> 00:00:53,035
61. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Accordeon/Acc_ Conditions_D_Entree_En_France"), 1, STOP_ON_FAILURE)

58
00:00:53,037 --> 00:00:53,064
67. Accordeon Antécédents administratifs

59
00:00:53,066 --> 00:00:53,097
73. Accordeon Document De Voyage 

60
00:00:53,098 --> 00:00:53,126
77. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Menu/Menu_Documents_De_Voyage"), 1, STOP_ON_FAILURE)

61
00:00:53,127 --> 00:00:53,156
83. Accordeon Sortant d'établissement pénitentiaire 

62
00:00:53,158 --> 00:00:53,182
87. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Menu/Menu_Sortant_D_Etablissement_Penitentiaire"), 1, STOP_ON_FAILURE)

63
00:00:53,183 --> 00:00:53,214
93. Accordeon Consultations sécuritaires

64
00:00:53,217 --> 00:00:53,277
101. Generer un nom aleatoire

65
00:00:53,280 --> 00:00:53,284
105. println(RandomNom)

66
00:00:53,287 --> 00:00:55,568
111. Renseigner Le Nom

67
00:00:55,570 --> 00:00:55,571
117. Renseigner Le Sexe (M/F)

68
00:00:55,572 --> 00:00:56,719
1. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/btn_radio_Sexe_F"), STOP_ON_FAILURE)

69
00:00:56,722 --> 00:00:56,725
121. if (Sexe == "Homme")

70
00:00:56,727 --> 00:00:57,865
127. Cocher la case date de naissance approximative

71
00:00:57,868 --> 00:01:00,109
133. Renseigner l'Année de Naissance (Majeur/Mineur)

72
00:01:00,110 --> 00:01:00,111
139. Renseigner Le Pays De Naissance  (RPT/RUE) 

73
00:01:00,114 --> 00:01:01,263
1. selectOptionByLabel(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/select_Pays_De_Naissance"), "ALGERIE", false, STOP_ON_FAILURE)

74
00:01:01,266 --> 00:01:01,268
143. if (Nationnalite == "RUE")

75
00:01:01,270 --> 00:01:01,271
149. Renseigner la Nationalité 

76
00:01:01,272 --> 00:01:02,410
1. selectOptionByLabel(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/select_Nationnalite"), "algérienne", false, STOP_ON_FAILURE)

77
00:01:02,414 --> 00:01:02,416
153. if (Nationnalite == "RUE")

78
00:01:02,418 --> 00:01:02,420
159. Renseigner Le Lieu de Naissance pour (RPT/RUE) 

79
00:01:02,422 --> 00:01:04,705
1. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/input_Lieu_De_Naissance"), "Wahran", STOP_ON_FAILURE)

80
00:01:04,709 --> 00:01:04,711
163. if (Nationnalite == "RUE")

81
00:01:04,714 --> 00:01:05,841
169. Renseigner la Situation Familiale

82
00:01:05,843 --> 00:01:08,033
175. Renseigner Condition d entrée en France

83
00:01:08,036 --> 00:01:09,172
179. selectOptionByLabel(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/select_Condition_Entree_En_France"), "Irrégulière", false, STOP_ON_FAILURE)

84
00:01:09,173 --> 00:01:09,174
183. if (ControleChampsCreation == "true")

85
00:01:09,176 --> 00:01:10,310
189. Validation Creation de dossier

86
00:01:10,313 --> 00:01:10,791
195. Verification de l'affichage et click sur le bouton Valider et attribuer un numero Etranger

87
00:01:10,793 --> 00:01:11,939
199. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Formulaire_Creation_Dossier/Formulaire_Creation_Dossier_Input/btn_Valider_Attribuer_Numero_Etranger"), STOP_ON_FAILURE)

88
00:01:11,944 --> 00:01:11,947
203. switch (OrigineDossier)

89
00:01:11,949 --> 00:01:13,129
4.  l Origine du Dossier est Asile

90
00:01:13,134 --> 00:01:13,136
2. break

91
00:01:13,138 --> 00:01:13,180
209. Cliquer sur le bouton Attribuer Numero Etranger

92
00:01:13,183 --> 00:01:14,363
215. Cliquer sur le bouton Confirmer et Attribuer Numero Etranger

93
00:01:14,365 --> 00:01:14,436
221. Stocker la valeur Numero Etranger attribué 

94
00:01:14,439 --> 00:01:14,440
225. NumeroEtranger = NumeroEtrangerGenere

95
00:01:14,444 --> 00:01:14,445
229. println(NumeroEtrangerGenere)

96
00:01:14,447 --> 00:01:14,450
233. println(NumeroEtranger)

97
00:01:14,452 --> 00:01:14,453
23. println(NumeroEtranger)

98
00:01:14,455 --> 00:01:14,548
29. Appel Brique Réutilisable pour Prendre une Mesure selon les Choix : OQTF , Expulsion ,IAT ,ITF ,ExecutionFicheSIS, RemiseSchengen, TransfertDublin

99
00:01:14,550 --> 00:01:15,750
1. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Prendre_Mesure/btn_Prendre_Mesure"), STOP_ON_FAILURE)

100
00:01:15,753 --> 00:01:20,765
5. delay(5)

101
00:01:20,767 --> 00:01:20,768
9. switch (Mesure)

102
00:01:20,769 --> 00:01:21,893
4.  Prendre Une Mesure TransfertDublin  

103
00:01:21,895 --> 00:01:23,019
10. Cliquer sur le bourron Confirmer Mesure

104
00:01:23,021 --> 00:01:23,639
14. verifyElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Prendre_Mesure/btn_Supprimer_Fiche_Mesure"), 2, STOP_ON_FAILURE)

105
00:01:23,641 --> 00:01:23,642
2. break

106
00:01:23,645 --> 00:01:23,748
13. callTestCase(findTestCase("Test Cases/Test Reutilisable/Main/ANEF_Eloignement_V_Nawres/ANEF_Prendre_Mesure_Formulaire"), ["Mesure":Mesure, "FondementLegal":FondementLegal, "NatureDeLacteExpulsion":NatureDeLacteExpulsion, "UrgenceAbsolueExpulsion":UrgenceAbsolueExpulsion, ... ], STOP_ON_FAILURE)

107
00:01:23,749 --> 00:01:23,750
3. Generer la date du jour

108
00:01:23,752 --> 00:01:23,752
7. currentDate = calendar.getTime()

109
00:01:23,758 --> 00:01:23,759
11. sdf = new java.text.SimpleDateFormat(dd/MM/yyyy)

110
00:01:23,762 --> 00:01:23,762
15. formattedDate = sdf.format(currentDate)

111
00:01:23,765 --> 00:01:23,765
19. DateActuelle = formattedDate.toString()

112
00:01:23,767 --> 00:01:23,768
23. println(DateActuelle)

113
00:01:23,770 --> 00:01:23,796
27. waitForElementPresent(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Prendre_Mesure_Formulaire/select_Fondement_Legal"), 10, STOP_ON_FAILURE)

114
00:01:23,798 --> 00:01:23,799
31. if (Mesure != "ITF")

115
00:01:23,802 --> 00:01:23,912
3. Remplir le champ Fondement Legal

116
00:01:23,914 --> 00:01:23,914
7. if (Mesure == "Expulsion")

117
00:01:23,916 --> 00:01:23,917
13. Generer un numero aleatoire

118
00:01:23,918 --> 00:01:23,918
17. println(NumberUsagerRandom)

119
00:01:23,920 --> 00:01:23,921
21. RandomNumber = NumberUsagerRandom.toString()

120
00:01:23,923 --> 00:01:23,923
27. Renseigner les champs de l'accordeon Fondement Legal pour un OQTF 

121
00:01:23,926 --> 00:01:23,928
33. Renseigner les champs de l'accordeon Fondement Legal pour une Remise Schengen 

122
00:01:23,930 --> 00:01:23,932
39. generer un nombre aleatoire entre '1' et '30'

123
00:01:23,934 --> 00:01:23,935
43. println(RandomNumber)

124
00:01:23,936 --> 00:01:23,937
47. RandomNumberSelect = RandomNumber.toString()

125
00:01:23,939 --> 00:01:23,940
53. Renseigner les champs de l'accordeon Fondement Legal pour un Transfert Dublin 

126
00:01:23,942 --> 00:01:26,138
3. Renseigner le champ Date Transmission de la Requête

127
00:01:26,140 --> 00:01:27,366
9. Renseigner le champ Êtat Requis

128
00:01:27,368 --> 00:01:29,551
15. Renseigner le champ Date de Reponse de l'etat requis

129
00:01:29,553 --> 00:01:30,669
21. Renseigner le champ Decision de l'Etat

130
00:01:30,671 --> 00:01:32,906
27. Renseigner le champ Date de fin de validité

131
00:01:32,908 --> 00:01:35,101
33. Renseigner le champ Date de la demande de réexamen

132
00:01:35,103 --> 00:01:37,274
39. Renseigner le champ Date de la décision de transfert 

133
00:01:37,277 --> 00:01:38,463
45. Renseigner le champ Êtat De Transfert

134
00:01:38,464 --> 00:01:38,465
53. Ajouter un Etat Requis

135
00:01:38,467 --> 00:01:39,612
3. Cliquer sur le boutton Ajouter Etat Requis

136
00:01:39,614 --> 00:01:41,812
9. Renseigner le champ Date Transmission de la Requête

137
00:01:41,814 --> 00:01:43,080
15. Renseigner le champ Êtat Requis

138
00:01:43,082 --> 00:01:45,274
21. Renseigner le champ Date de Reponse de l'etat requis

139
00:01:45,276 --> 00:01:46,418
27. Renseigner le champ Decision de l'Etat

140
00:01:46,422 --> 00:01:48,618
33. Renseigner le champ Date de la demande de réexamen

141
00:01:48,620 --> 00:01:50,809
39. Renseigner le champ Date de fin de validité

142
00:01:50,811 --> 00:01:52,993
45. Renseigner le champ Date de la décision de transfert 

143
00:01:52,996 --> 00:01:54,132
49. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Prendre_Mesure_Formulaire/btn_Enregistrer"), STOP_ON_FAILURE)

144
00:01:54,134 --> 00:01:54,135
57. if (Mesure == "ExecutionFicheSIS")

145
00:01:54,137 --> 00:01:54,137
61. if (Mesure == "IAT")

146
00:01:54,139 --> 00:01:54,140
35. if (Mesure == "ITF")

147
00:01:54,142 --> 00:01:55,242
41. Enregistrer les modifications

148
00:01:55,244 --> 00:01:55,363
33. callTestCase(findTestCase("Test Cases/Test Reutilisable/Main/ANEF_Eloignement_V_Nawres/ANEF_Ajouter_Decision_Et_Notification"), ["ModeNotification":ModeNotification], STOP_ON_FAILURE)

149
00:01:55,365 --> 00:01:55,365
1. calendar = Calendar.getInstance()

150
00:01:55,367 --> 00:01:55,367
5. currentDate = calendar.getTime()

151
00:01:55,369 --> 00:01:55,370
9. sdf = new java.text.SimpleDateFormat(dd/MM/yyyy)

152
00:01:55,372 --> 00:01:55,373
13. formattedDate = sdf.format(currentDate)

153
00:01:55,375 --> 00:01:55,375
17. DateActuelle = formattedDate.toString()

154
00:01:55,377 --> 00:01:55,378
21. println(DateActuelle)

155
00:01:55,382 --> 00:01:55,421
27. Attendre que le bouton soit cliquable

156
00:01:55,423 --> 00:01:56,578
33. Cliquer sur le bouton Ajouter Une Decision 

157
00:01:56,581 --> 00:01:56,640
39. Confirmer l'Ajout de decision

158
00:01:56,643 --> 00:01:57,779
43. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/btn_Confirmer_Ajout_Decision"), STOP_ON_FAILURE)

159
00:01:57,782 --> 00:01:58,893
49. Attendre que le bouton Confirmer Notification soit cliquable

160
00:01:58,895 --> 00:02:00,039
55. Confirmer Notification

161
00:02:00,041 --> 00:02:01,227
59. selectOptionByLabel(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/select_Mode_Notification"), ModeNotification, false, STOP_ON_FAILURE)

162
00:02:01,231 --> 00:02:03,431
63. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/input_Date_Notification"), DateActuelle, STOP_ON_FAILURE)

163
00:02:03,433 --> 00:02:03,434
67. if (ModeNotification == "Voie administrative")

164
00:02:03,435 --> 00:02:05,591
1. setText(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/input_Heure_Notification"), "14:30", STOP_ON_FAILURE)

165
00:02:05,593 --> 00:02:06,650
73. Ajouter un fichier 

166
00:02:06,652 --> 00:02:06,683
79. Confirmer l'ajout de Notification

167
00:02:06,686 --> 00:02:07,837
83. click(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/btn_Confirmer_Ajout_Notification"), STOP_ON_FAILURE)

168
00:02:07,839 --> 00:02:07,907
87. waitForElementClickable(findTestObject("Object Repository/ANEF_Eloignement_V_Nawres/Page_Ajouter_Decision/btn_Enregistrer"), 7, STOP_ON_FAILURE)

